<div class="network-layout">
  <app-sidebar></app-sidebar>

  <main class="network-main">
    <header class="network-header">
      <div class="header-content">
        <h1>üåê Network Map</h1>
        <div class="header-actions">
          <button class="btn btn-primary" (click)="scanNetwork()" [disabled]="scanning">
            @if (scanning) {
            <span class="spinner"></span> Scanning... } @else { üîç Scan Network }
          </button>
        </div>
      </div>

      @if (lastScan) {
      <p class="last-scan">Last scan: {{ lastScan | date : 'medium' }}</p>
      }
    </header>

    <!-- Stats Cards -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-icon">üì°</div>
        <div class="stat-info">
          <span class="stat-value">{{ devices.length }}</span>
          <span class="stat-label">Total Devices</span>
        </div>
      </div>
      <div class="stat-card online">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-info">
          <span class="stat-value">{{ onlineCount }}</span>
          <span class="stat-label">Online</span>
        </div>
      </div>
      <div class="stat-card offline">
        <div class="stat-icon">‚ùå</div>
        <div class="stat-info">
          <span class="stat-value">{{ offlineCount }}</span>
          <span class="stat-label">Offline</span>
        </div>
      </div>
    </div>

    <!-- Devices Grid -->
    <section class="devices-section">
      <h2>Discovered Devices</h2>

      @if (loading) {
      <div class="loading-state">
        <span class="spinner"></span>
        <p>Loading devices...</p>
      </div>
      } @else if (devices.length === 0) {
      <div class="empty-state">
        <p>No devices found. Click "Scan Network" to discover devices.</p>
      </div>
      } @else {
      <div class="devices-grid">
        @for (device of devices; track device.mac) {
        <div class="device-card" [class]="getStatusColor(device.status)">
          <div class="device-status">
            <span class="status-dot" [class]="device.status"></span>
            <span class="status-text">{{ device.status }}</span>
          </div>

          <div class="device-icon">üñ•Ô∏è</div>

          <div class="device-info">
            <h3 class="device-hostname">{{ device.hostname || 'Unknown' }}</h3>
            <p class="device-ip">{{ device.ip }}</p>
          </div>

          <div class="device-details">
            <div class="detail-row">
              <span class="label">MAC:</span>
              <span class="value">{{ device.mac }}</span>
            </div>
            @if (device.vendor) {
            <div class="detail-row">
              <span class="label">Vendor:</span>
              <span class="value">{{ device.vendor }}</span>
            </div>
            }
            <div class="detail-row">
              <span class="label">Last Seen:</span>
              <span class="value">{{ formatLastSeen(device.lastSeen) }}</span>
            </div>
          </div>
        </div>
        }
      </div>
      }
    </section>
  </main>
</div>
